@page "/"
@using Microsoft.IdentityModel.JsonWebTokens
@inject ITodoItemService todoItemService
@attribute [Authorize]

<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

@code {
    [CascadingParameter]
    public Task<AuthenticationState> state { get; set; }
    private IEnumerable<TodoItemDto> Items;

    protected override void OnInitialized()
    {
        SetItem();
    }

    private async void SetItem() 
    {
        var authState = await state;
        string aa = authState.User.FindFirst(c => c.Type == JwtRegisteredClaimNames.Jti).Value;
        Guid id = Guid.Parse(aa);
        Items = await todoItemService.GetItemsByUserIdAsync(id);
        if (true) { }
    }
}